<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=1280, height=720, initial-scale=1.0" />
    <title>우주 퀴즈 프로젝트</title>
    <link rel="stylesheet" href="../common/common.css" />
    <link rel="stylesheet" href="./css/dragdrop.css">
  </head>
<body>
  <div id="wrap">
    <header style="color:#8DFFDE">
      <div class="goHome"><a href="./index.html"></a></div>
      <div class="gameName">낱말 찾아 넣기</div>
      <div class="quizName">Dragdrop </div>
    </header>

    <main class="content">
      <ul>
        <!-- 스타트페이지 -->
        <li class="start_page off">
          <div class="spaceship"></div>
          <div class="spaceHuman"></div>
          <h1></h1>
          <span></span>
          <button class="btn_start"></button>
        </li>
        <!-- 1페이지 -->
        <li class="quiz_1 quizPage on">
          <section class="quizBox">
            <div class="char_03"></div>
            <h2 class="quizText">다음 문제에서 공통점이 적힌 단어를 찾아 보세요.</h2>
            <!-- <div class="skyBox">토끼, 호랑이, 사슴, 무당벌레, 기린 </div> -->
            <div class="drag_objs">
                <div class="spaceShip" data-drop>
                  토끼, 호랑이, 사슴, 무당벌레, 기린 
                  <!-- <div class="spaceShipAfter"></div> -->
                </div>

                <div class="Humans">
                  <div class="spaceHuman" data-drag>
                    <p>동물</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>곤충</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>사람</p>
                  </div>
                </div>
  
            </div>
          </section>
          
        </li>
        <li class="quiz_2 quizPage ">
          <section class="quizBox">
            <div class="char_03"></div>
            <h2 class="quizText">다음 문제에서 공통점이 적힌 단어를 찾아 보세요.</h2>
            <!-- <div class="skyBox">장화, 구두, 운동화, 슬리퍼, 샌들</div> -->
            <div class="drag_objs">
                <div class="spaceShip" data-drop>
                  장화, 구두, 운동화, 슬리퍼, 샌들
                  <!-- <div class="spaceShipAfter"></div> -->
                </div>
                <div class="Humans">
                  <div class="spaceHuman" data-drag>
                    <p>신발</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>비옷</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>장갑</p>
                  </div>
                </div>
  
            </div>
          </section>
          
        </li>

        <li class="quiz_3 quizPage ">
          <section class="quizBox">
            <div class="char_03"></div>
            <h2 class="quizText">다음 문장에서 빈칸에 들어가야 할 단어를 맞추어 보세요.</h2>
            <!-- <div class="skyBox"> </div> -->
              
            <div class="drag_objs">
                <div class="spaceShip" data-drop>
                  나는 오늘 학교에 <span class="space-grotesk"> _ _ .</span>
                  <!-- <div class="spaceShipAfter"></div> -->
                </div>

                <div class="Humans">
                  <div class="spaceHuman" data-drag>
                    <p>갔다</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>먹다</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>잤다</p>
                  </div>
                </div>
  
            </div>
          </section>
          
        </li>

        <li class="quiz_4 quizPage ">
          <section class="quizBox">
            <div class="char_03"></div>
            <h2 class="quizText">다음 문장에서 빈칸에 들어가야 할 단어를 맞추어 보세요.</h2>
            <!-- <div class="skyBox">학교에서는 매일 책을 <span class="space-grotesk">_ _ _ .</span> </div> -->
              
            <div class="drag_objs">
                <div class="spaceShip" data-drop>
                  학교에서는 매일 책을 <span class="space-grotesk">_ _ _ .</span>
                  <!-- <div class="spaceShipAfter"></div> -->
                </div>

                <div class="Humans">
                  <div class="spaceHuman" data-drag>
                    <p>만들다 </p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>그리다</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>읽는다</p>
                  </div>
                </div>
  
            </div>
          </section>
          
        </li>

        <li class="quiz_5 quizPage ">
          <section class="quizBox">
            <div class="char_03"></div>
            <h2 class="quizText">다음 문장에서 빈칸에 들어가야 할 단어를 맞추어 보세요.</h2>
            <!-- <div class="skyBox">친구들과 함께 숨바꼭질을<span class="space-grotesk">_ _   .</span> </div> -->
              
            <div class="drag_objs">
                <div class="spaceShip" data-drop>
                  친구들과 함께 숨바꼭질을<span class="space-grotesk">_ _   .</span> 
                  <!-- <div class="spaceShipAfter"></div> -->
                </div>

                <div class="Humans">
                  <div class="spaceHuman" data-drag>
                    <p>걷다</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>한다</p>
                  </div>
                  <div class="spaceHuman" data-drag>
                    <p>날다</p>
                  </div>
                </div>
  
            </div>
          </section>
          
        </li>
        
      </ul>
    </main>
  </div>
<script src="./js/scale.js"></script>
<script>
  // Get the draggable element
  var draggable;
  let dropArea = document.querySelector("#dropArea")
  // Variables to track mouse position and dragging state
  var offsetX, offsetY;
  var isDragging = false;
  let droppedArea;
  // Function to start dragging
  function startDrag(e) {

    draggable = e.target;
    // Calculate the offset between mouse position and top-left corner of the draggable element
    offsetX = e.clientX - draggable.offsetLeft;
    offsetY = e.clientY - draggable.offsetTop;

    // Set dragging state to true
    isDragging = true;

    // Add event listeners for mousemove and mouseup events
    document.addEventListener('mousemove', drag);
    document.addEventListener('mouseup', stopDrag);
  }

  // Function to handle dragging
  function drag(e) {
    console.log("확인", e);

    if (isDragging) {
      // Calculate new position of the draggable element
      var newX = e.clientX - offsetX;
      var newY = e.clientY - offsetY;

      // Set the new position
      draggable.style.left = newX + 'px';
      draggable.style.top = newY + 'px';
    }
  }

  // Function to stop dragging
  function stopDrag() {
    // Set dragging state to false
    checkAnswer();
    isDragging = false;

    // Remove event listeners for mousemove and mouseup events
    document.removeEventListener('mousemove', drag);
    document.removeEventListener('mouseup', stopDrag);
  }
  function checkAnswer() {
    var draggableRect = draggable.getBoundingClientRect();
    let target = document.querySelectorAll(".dropArea")
    // 대상 오브젝트의 위치
    var targetRect = [];
    for (let i = 0; i < target.length; i++) {
      targetRect.push(target[i].getBoundingClientRect())
    }

    // 마우스의 위치
    var mouseX = event.clientX;
    var mouseY = event.clientY;
    let dropcheck = false;

    // console.log(targetRect[0] )
    // 마우스가 대상 오브젝트 위에 있는지 확인합니다.
    for (let i = 0; i < targetRect.length; i++) {
      if (mouseX >= targetRect[i].left && mouseX <= targetRect[i].right &&
        mouseY >= targetRect[i].top && mouseY <= targetRect[i].bottom) {
        dropcheck = true;
        droppedArea = target[i];
        checking();
      } else {

        //reset;
      }
    }
    console.log(dropcheck)
  }
  function endCallback() {
    let copy = draggable.cloneNode(true);
    copy.style.position = 'static'
    dropArea.append(copy)
  }

  function checking() {
    let objans = draggable.getAttribute('drag-obj')
    let dropans = droppedArea.getAttribute('drop-obj')
    if (objans == dropaans) {
      console.log("cor")
    } else {
      console.log('fail')
    }
  }

  // Add event listener for mousedown event to start dragging
  document.querySelectorAll(".draggable").forEach(function (e) {
    e.addEventListener('mousedown', startDrag);
  })

</script>

</body>


<script>

</script>

</html>
